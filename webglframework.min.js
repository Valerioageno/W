W={o:0,p:{},n:{},s:o=>{gl=a.getContext("webgl2"),W.P=gl.createProgram(),gl.shaderSource(o=gl.createShader(35633),"#version 300 es\nin vec4 position;in vec4 color;uniform mat4 mvp;uniform mat4 model;out vec4 v_color;out vec3 v_position;void main(){gl_Position=mvp*position;v_position=vec3(model*position);v_color=color;}"),gl.compileShader(o),gl.attachShader(W.P,o),gl.shaderSource(o=gl.createShader(35632),"#version 300 es\nprecision mediump float;uniform vec3 light;in vec3 v_position;in vec4 v_color;out vec4 c;void main(){c=vec4(v_color.rgb*(max(dot(light,normalize(cross(dFdx(v_position),dFdy(v_position)))),.0)+.2),1);}"),gl.compileShader(o),gl.attachShader(W.P,o),gl.linkProgram(W.P),gl.useProgram(W.P),gl.clearColor(1,1,1,1),gl.enable(2929)},l:o=>W.p[W.N][o]+(W.n[W.N][o]-W.p[W.N][o])*(W.n[W.N].f/W.n[W.N].t),t:o=>o.translateSelf(W.l("x"),W.l("y"),W.l("z")).rotateSelf(W.l("rx"),0,0).rotateSelf(0,W.l("ry"),0).rotateSelf(0,0,W.l("rz")).scaleSelf(W.l("w"),W.l("h"),W.l("d")),i:o=>{o.n||="o"+W.o++,o={...W.p[o.n]=W.n[o.n]||{w:1,h:1,d:1,x:0,y:0,z:0,rx:0,ry:0,rz:0,b:"777"},...o},o.t||=1,o.f=1,W.n[o.n]=o},plane:o=>{o.T="q",W.i(o)},cube:o=>{o.T="c",W.i(o)},pyramid:o=>{o.T="p",W.i(o)},move:o=>W.i(o),camera:o=>{o.n="_c",W.i(o)},light:o=>{o.n="_l",W.i(o)},d:(o,e,r,t,l)=>{for(r in gl.clear(16640),o=new DOMMatrix([1/Math.tan(.5)/(a.width/a.height),0,0,0,0,1/Math.tan(.5),0,0,0,0,901/-899,-1,0,0,1800/-899,0]),W.N="_c",W.t(o),e=[],W.n){(t=W.n[r]).f<t.t&&t.f++,"q"==t.T?e=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0]:"c"==t.T?e=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,-1,-1,-1,1,-1,1,1,-1]:"p"==t.T&&(e=[-1,0,1,1,0,1,0,3**.5,0,1,0,1,1,0,-1,0,3**.5,0,1,0,-1,-1,0,-1,0,3**.5,0,-1,0,-1,-1,0,1,0,3**.5,0,-1,0,1,-1,0,-1,1,0,1,-1,0,-1,1,0,-1,1,0,1]),gl.bindBuffer(34962,gl.createBuffer()),gl.bufferData(34962,new Float32Array(e),35044),gl.enableVertexAttribArray(gl.vertexAttribPointer(gl.getAttribLocation(W.P,"position"),3,5126,!1,0,0)),gl.vertexAttrib3fv(gl.getAttribLocation(W.P,"color"),[...t.b].map((o=>("0x"+o)/16))),W.N=t.n;l=new DOMMatrix;W.t(l),gl.uniformMatrix4fv(gl.getUniformLocation(W.P,"model"),!1,l.toFloat32Array()),l.preMultiplySelf(o),gl.uniformMatrix4fv(gl.getUniformLocation(W.P,"mvp"),!1,l.toFloat32Array()),W.N="_l",gl.uniform3f(gl.getUniformLocation(W.P,"light"),W.l("x"),W.l("y"),W.l("z")),gl.drawArrays(4,0,e.length/3)}}},W.s(),W.light({z:1}),W.camera({}),setInterval(W.d,16)